---------------------------------------------
Create React-Application
---------------------------------------------

Creating a new React app in /Users/lars/GitHub/EcUtbildningDevOps/ContainerTeknologi/Assignment2/part2/multi-stage.

Installing packages. This might take a couple of minutes.
Installing react, react-dom, and react-scripts with cra-template...


added 1934 packages, and audited 1935 packages in 1m

150 packages are looking for funding
  run `npm fund` for details

10 moderate severity vulnerabilities

To address all issues, run:
  npm audit fix

Run `npm audit` for details.

Installing template dependencies using npm...

added 56 packages, and audited 1991 packages in 9s

151 packages are looking for funding
  run `npm fund` for details

10 moderate severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
Removing template package using npm...


removed 1 package, and audited 1990 packages in 2s

151 packages are looking for funding
  run `npm fund` for details

10 moderate severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

Success! Created multi-stage at /Users/lars/GitHub/EcUtbildningDevOps/ContainerTeknologi/Assignment2/part2/multi-stage
Inside that directory, you can run several commands:

  npm start
    Starts the development server.

  npm run build
    Bundles the app into static files for production.

  npm test
    Starts the test runner.

  npm run eject
    Removes this tool and copies build dependencies, configuration files
    and scripts into the app directory. If you do this, you can’t go back!

We suggest that you begin by typing:

  cd multi-stage
  npm start

Happy hacking!
---------------------------------------------
Copy preped Dockerfile to project folder
---------------------------------------------
---------------------------------------------
Enter project folder
---------------------------------------------
---------------------------------------------
Build project
---------------------------------------------
[+] Building 49.5s (15/15) FINISHED
 => [internal] load build definition from Dockerfile                                                                                                                                                                                                                                                                                                                                0.0s
 => => transferring dockerfile: 471B                                                                                                                                                                                                                                                                                                                                                0.0s
 => [internal] load .dockerignore                                                                                                                                                                                                                                                                                                                                                   0.0s
 => => transferring context: 2B                                                                                                                                                                                                                                                                                                                                                     0.0s
 => [internal] load metadata for docker.io/library/nginx:latest                                                                                                                                                                                                                                                                                                                     0.0s
 => [internal] load metadata for docker.io/library/node:alpine                                                                                                                                                                                                                                                                                                                      1.2s
 => [auth] library/node:pull token for registry-1.docker.io                                                                                                                                                                                                                                                                                                                         0.0s
 => [internal] load build context                                                                                                                                                                                                                                                                                                                                                  10.8s
 => => transferring context: 229.99MB                                                                                                                                                                                                                                                                                                                                              10.6s
 => [builder 1/6] FROM docker.io/library/node:alpine@sha256:3da1c08529fef7007d57d2133a0feb0fa8c60fdd4ad6691978f9dfcb0365b430                                                                                                                                                                                                                                                        0.0s
 => [stage-1 1/2] FROM docker.io/library/nginx                                                                                                                                                                                                                                                                                                                                      0.0s
 => CACHED [builder 2/6] WORKDIR /app                                                                                                                                                                                                                                                                                                                                               0.0s
 => CACHED [builder 3/6] COPY package.json .                                                                                                                                                                                                                                                                                                                                        0.0s
 => CACHED [builder 4/6] RUN npm install                                                                                                                                                                                                                                                                                                                                            0.0s
 => [builder 5/6] COPY . .                                                                                                                                                                                                                                                                                                                                                         14.0s
 => [builder 6/6] RUN npm run build                                                                                                                                                                                                                                                                                                                                                22.0s
 => CACHED [stage-1 2/2] COPY --from=builder /app/build /usr/share/nginx/html                                                                                                                                                                                                                                                                                                       0.0s
 => exporting to image                                                                                                                                                                                                                                                                                                                                                              0.0s
 => => exporting layers                                                                                                                                                                                                                                                                                                                                                             0.0s
 => => writing image sha256:2d5b80d76d4439674b9900f5903ed2ed2bb268a880ba97e616c245509c50c21a                                                                                                                                                                                                                                                                                        0.0s
 => => naming to docker.io/deskavaenkel/docker-react-app                                                                                                                                                                                                                                                                                                                            0.0s

Use 'docker scan' to run Snyk tests against images to find vulnerabilities and learn how to fix them
---------------------------------------------
Run project om port 80
---------------------------------------------
29695a6bf67e03390dd72424d4bde0b78420661c82596286147bb7f29780d311
---------------------------------------------
Show running containers
---------------------------------------------
CONTAINER ID   IMAGE                           COMMAND                  CREATED                  STATUS                  PORTS                               NAMES
29695a6bf67e   deskavaenkel/docker-react-app   "/docker-entrypoint.…"   Less than a second ago   Up Less than a second   0.0.0.0:80->80/tcp, :::80->80/tcp   docker-react-app
---------------------------------------------
Give server time to be able to respond
---------------------------------------------
---------------------------------------------
print response from server
http://localhost:80
---------------------------------------------
<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Web site created using create-react-app"/><link rel="apple-touch-icon" href="/logo192.png"/><link rel="manifest" href="/manifest.json"/><title>React App</title><link href="/static/css/main.a617e044.chunk.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"></div><script>!function(e){function t(t){for(var n,i,a=t[0],c=t[1],l=t[2],s=0,p=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(f&&f(t);p.length;)p.shift()();return u.push.apply(u,l||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==o[c]&&(n=!1)}n&&(u.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={1:0},u=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var u,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"static/js/"+({}[e]||e)+"."+{3:"cb28be67"}[e]+".chunk.js"}(e);var c=new Error;u=function(t){a.onerror=a.onload=null,clearTimeout(l);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),u=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+u+")",c.name="ChunkLoadError",c.type=n,c.request=u,r[1](c)}o[e]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:a})}),12e4);a.onerror=a.onload=u,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var a=this["webpackJsonpmulti-stage"]=this["webpackJsonpmulti-stage"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var f=c;r()}([])</script><script src="/static/js/2.afaa1dd0.chunk.js"></script><script src="/static/js/main.eed8ec1b.chunk.js"></script></body></html>
---------------------------------------------
stop docker container
---------------------------------------------
docker-react-app
---------------------------------------------
Cleanup/remove container
---------------------------------------------
docker-react-app
Untagged: deskavaenkel/docker-react-app:latest
Deleted: sha256:2d5b80d76d4439674b9900f5903ed2ed2bb268a880ba97e616c245509c50c21a
---------------------------------------------
Done
---------------------------------------------